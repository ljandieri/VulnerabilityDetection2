import os

outputFile = 'results.txt'
thisDir = os.getcwd()
files = os.listdir(thisDir)
files.remove('summarizeResults.py')
if outputFile in files: files.remove(outputFile) 

for i,f in enumerate(files):
    newName = str(i+1) + '--' + 'LSTM' + f.split('LSTM')[1]
    os.rename(thisDir + '/' + f, thisDir + '/' + newName)

files = os.listdir(thisDir)
files.remove('summarizeResults.py')
if outputFile in files: files.remove(outputFile) 

d = {}

for f in files:
    with open(f,'r') as openFile:
        lines = openFile.readlines()
        thisDictionary = {}
        train = {}

        train['Accuracy'] = lines[0].split(' ')[1][:5]
        train['Precision'] = lines[1].split(' ')[1][:5]
        train['Recall'] = lines[2].split(' ')[1][:5]
        train['F1'] = lines[3].split(' ')[2][:5]

        test = {}
        test['Accuracy'] = lines[5].split(' ')[1][:5]
        test['Precision'] = lines[6].split(' ')[1][:5]
        test['Recall'] = lines[7].split(' ')[1][:5]
        test['F1'] = lines[8].split(' ')[2][:5]

        finaltest = {}
        finaltest['Accuracy'] = lines[10].split(' ')[1][:5]
        finaltest['Precision'] = lines[11].split(' ')[1][:5]
        finaltest['Recall'] = lines[12].split(' ')[1][:5]
        finaltest['F1'] = lines[13].split(' ')[2][:5]

        thisDictionary['train'] = train
        thisDictionary['test'] = test
        thisDictionary['finaltest'] = finaltest

        d[f] = thisDictionary

F1_sorted_files = sorted(files, key=lambda x: d[x]['finaltest']['F1'], reverse=True)

with open(outputFile,'w') as openFile:
    openFile.write('Models in order (descending finaltest F1 score)\n\n')
    for f in F1_sorted_files:
        fReduced = f
        fReduced = fReduced.replace('h5.','')
        fReduced = fReduced.replace('LTSM_model_c2v_','')
        outputString = fReduced + ' --- F1: ' + d[f]['finaltest']['F1']
        print(outputString)
        openFile.write(outputString + '\n\n')
