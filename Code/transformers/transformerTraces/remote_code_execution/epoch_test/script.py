import os
import matplotlib.pyplot as plt

thisDir = os.getcwd()

files = [f for f in os.listdir(thisDir) if 'Transformer_model' in f]

lineNumbers = [10,11,12,13]

d = {}
for f in files:
    right = f.split('eps')[1]
    epochs = int(right.split('_')[0])
    d[epochs] = {}
    with open(f) as fopen:
        thisFile = fopen.readlines()
        for line in lineNumbers:
            thisLine = thisFile[line]
            metric = thisLine.split(':')[0]
            value = float(thisLine.split(' ')[-1][:6])
            d[epochs][metric] = value

names = sorted(d.keys())
F1scores = [d[name]['F1 score'] for name in names]
Accuracy = [d[name]['Accuracy'] for name in names]
Recall = [d[name]['Recall'] for name in names]
Precision = [d[name]['Precision'] for name in names]


plt.scatter(names,F1scores)
plt.plot(names,F1scores, label='F1 Scores')

#plt.scatter(names,Accuracy)
#plt.plot(names,Accuracy, label='Accuracy')

#plt.scatter(names,Recall)
#plt.plot(names,Recall, label = 'Recall')

#plt.scatter(names,Precision)
#plt.plot(names,Precision, label='Precision')

plt.title('Optimal Number of Epochs')
plt.legend()
plt.xlabel('Number of epochs')
plt.ylabel('F1 Scores')
#plt.show()
plt.savefig('Figure_2.png')